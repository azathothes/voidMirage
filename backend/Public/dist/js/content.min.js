window.onload=function(){var e=new SimpleMDE({element:document.getElementById("content"),toolbar:["bold","italic","heading","|","quote","unordered-list","ordered-list","link",{name:"image",action:function(){document.getElementById("uploadBack").style.visibility="visible",document.getElementById("uploadWin").style.visibility="visible"},className:"fa fa-picture-o",title:"Insert Image"},"horizontal-rule","preview","guide"]});document.getElementById("sub-btn").onclick=function(){$.ajax({url:"/uploadImg_article",type:"POST",cache:!1,data:new FormData($("#uploadForm")[0]),processData:!1,contentType:!1,success:function(t){t=JSON.parse(t),t.isok&&(console.log(t),document.getElementById("uploadBack").style.visibility="collapse",document.getElementById("uploadWin").style.visibility="collapse",e.value(e.value()+"![](\\"+t.filePath+")"))}})};var t=document.getElementById("submit");t.onclick=function(){var t={},l=document.getElementById("tagname");if(""===l.value||"请选择"===l.value)return void alert("请选择文章类别！");t.tagname=l.value;var i=document.getElementById("classify");if(""===i.value)return void alert("请为文章归档！");t.classify=i.value;var n=document.getElementById("title");if(""===n.value)return void alert("缺少文章名！");t.title=n.value;var o=e.value();return""===o?void alert("缺少文章类容！"):(t.content=o,void $.post("/post_article",t,function(e){console.log(e);var t=JSON.parse(e);return console.log(t),t.isok?(alert("成功提交！"),void(window.location="/")):void alert("提交文章失败,原因: "+t.msg)}))},document.getElementById("close-btn").onclick=function(){document.getElementById("uploadBack").style.visibility="collapse",document.getElementById("uploadWin").style.visibility="collapse"}};