window.onload = function(){
	var simplemde = new SimpleMDE({ element: document.getElementById("content")});


	var submitBtn = document.getElementById('submit');
	submitBtn.onclick = function(){
		var data = {};
		var tagname = document.getElementById('tagname');
		if(tagname.value === "" || tagname.value === "请选择")
		{
			alert('请选择文章类别！');
			return;
		}
		data.tagname = tagname.value;
		var classify = document.getElementById('classify');
		if(classify.value === "")
		{
			alert('请为文章归档！');
			return;
		}
		data.classify = classify.value;
    	var title = document.getElementById('title');
    	if(title.value === "")
    	{
    		alert('缺少文章名！');
    		return;
    	}
    	data.title = title.value;
    	var content = simplemde.value();
    	if(content === "")
    	{
    		alert('缺少文章类容！')
    		return;
    	}
    	data.content = content;
    	$.post('/post_article',data,function(msg){
    		console.log(msg);
    		var result = JSON.parse(msg);
    		console.log(result);
    		if(!result.isok)
    		{
    			alert('提交文章失败,原因: '+result.msg);
    			return;
    		}
    		alert('成功提交！');
    		window.location = '/';
    	});




	}
}